import{d as C,b as F,aI as x,a as D,c as t,ag as m,u as e,g as u,w as n,i as b,h as P,H as w,o as k,k as A,b7 as H,b8 as N,b9 as R,ba as V,bb as I,aF as y,bc as L,W as U}from"./index-4772fb21.js";import{u as W}from"./usePageTitle-4307680d.js";const z=C({__name:"BlocksCatalogCreate",setup($){const l=F(),a=w(),p=x("redirect"),i=D("blockTypeSlug"),d=t(()=>i.value?[i.value]:null),f=m(l.blockTypes.getBlockTypeBySlug,d),o=t(()=>f.response),_=t(()=>o.value?[o.value.id]:null),h=m(l.blockSchemas.getBlockSchemaForBlockType,_),r=t(()=>h.response);function g(s){l.blockDocuments.createBlockDocument(s).then(({id:c})=>B(c)).catch(c=>{y("Failed to create block","error"),console.error(c)})}function S(){a.back()}function B(s){if(y("Block created successfully","success"),p.value){const c=a.resolve(L(p.value));a.push(c);return}a.push(U.block(s))}const v=t(()=>o.value?`Create ${o.value.name} Block`:"Create Block");return W(v),(s,c)=>{const T=P("p-layout-default");return e(o)?(k(),u(T,{key:0,class:"blocks-catalog-create"},{header:n(()=>[A(e(H),{"block-type":e(o)},null,8,["block-type"])]),default:n(()=>[e(o)?(k(),u(e(N),{key:0,"block-type":e(o)},{default:n(()=>[e(r)?(k(),u(e(R),V({key:e(r).id,"block-schema":e(r)},I({submit:g,cancel:S})),null,16,["block-schema"])):b("",!0)]),_:1},8,["block-type"])):b("",!0)]),_:1})):b("",!0)}}});export{z as default};
