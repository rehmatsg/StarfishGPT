import{d as F,e as h,c as o,o as n,j as O,L as y,k as m,u as e,X as G,Y as R,a0 as V,a as j,b as U,A as $,a1 as q,a2 as z,D as E,a3 as H,a4 as W,a5 as X,g as s,w as t,h as b,H as Y,a6 as J,i as u,a7 as K,a8 as M,a9 as Q,aa as Z,ab as ee,ac as le,ad as ae,q as ne,W as se}from"./index-4772fb21.js";import{u as te}from"./usePageTitle-4307680d.js";const oe={class:"flow-run-graphs__panel-content"},ue=F({__name:"FlowRunGraphs",props:{flowRun:null},setup(k){const d=h(!1),c=h(null),p=h(!1),f=o(()=>({root:{"flow-run-graphs--fullscreen":d.value},graph:{"flow-run-graphs__graphs--panel-open":p.value},panel:{"flow-run-graphs__panel-container--panel-open":p.value}}));function l(i){c.value=i,p.value=!!i}function v(){p.value=!1}return(i,r)=>(n(),O("div",{class:R(["flow-run-graphs",e(f).root])},[y("div",{class:R(["flow-run-graphs__graphs",e(f).graph])},[m(e(G),{class:"flow-run-graphs__timeline","flow-run":k.flowRun,height:"340px","selected-node":c.value,onSelection:l,"onUpdate:fullscreen":r[0]||(r[0]=g=>d.value=g)},null,8,["flow-run","selected-node"])],2),y("div",{class:R(["flow-run-graphs__panel-container",e(f).panel])},[y("div",oe,[m(e(V),{"selected-node":c.value,floating:d.value,onDismiss:v},null,8,["selected-node","floating"])])],2)],2))}});const pe=F({__name:"FlowRun",setup(k){const d=Y(),c=j("flowRunId"),p=U(),f=$(p.flowRuns.getFlowRun,[c],{interval:5e3}),l=o(()=>f.response),v=o(()=>{var a;return(a=l.value)==null?void 0:a.deploymentId}),{deployment:i}=q(v),r=o(()=>{var a;return(a=l.value)!=null&&a.stateType?z(l.value.stateType):!0}),g=o(()=>[{label:"Logs"},{label:"Task Runs",hidden:r.value},{label:"Subflow Runs",hidden:r.value},{label:"Results",hidden:r.value},{label:"Artifacts",hidden:r.value},{label:"Details"},{label:"Parameters"}]),{tab:_,tabs:T}=E(g,"Logs");H(c,(a,w)=>{a!==w&&(_.value="Logs")});const D=o(()=>{var a;return((a=l.value)==null?void 0:a.parameters)??{}}),C=o(()=>{var a;return((a=i.value)==null?void 0:a.parameterOpenApiSchema)??{}}),x=o(()=>W(D.value,C.value));function I(){d.push(se.flowRuns())}const N=o(()=>{var a;return(a=l.value)==null?void 0:a.stateType});X(N);const P=o(()=>l.value?`Flow Run: ${l.value.name}`:"Flow Run");return te(P),(a,w)=>{const S=b("p-code-highlight"),A=b("p-tabs"),B=b("p-layout-default");return n(),s(B,{class:"flow-run"},{header:t(()=>[e(l)?(n(),s(e(J),{key:0,"flow-run-id":e(l).id,onDelete:I},null,8,["flow-run-id"])):u("",!0)]),default:t(()=>[e(l)&&!e(r)?(n(),s(ue,{key:0,"flow-run":e(l)},null,8,["flow-run"])):u("",!0),m(A,{selected:e(_),"onUpdate:selected":w[0]||(w[0]=L=>ne(_)?_.value=L:null),tabs:e(T)},{details:t(()=>[e(l)?(n(),s(e(K),{key:0,"flow-run":e(l)},null,8,["flow-run"])):u("",!0)]),logs:t(()=>[e(l)?(n(),s(e(M),{key:0,"flow-run":e(l)},null,8,["flow-run"])):u("",!0)]),results:t(()=>[e(l)?(n(),s(e(Q),{key:0,"flow-run":e(l)},null,8,["flow-run"])):u("",!0)]),artifacts:t(()=>[e(l)?(n(),s(e(Z),{key:0,"flow-run":e(l)},null,8,["flow-run"])):u("",!0)]),"task-runs":t(()=>[e(l)?(n(),s(e(ee),{key:0,"flow-run-id":e(l).id},null,8,["flow-run-id"])):u("",!0)]),"subflow-runs":t(()=>[e(l)?(n(),s(e(le),{key:0,"flow-run-id":e(l).id},null,8,["flow-run-id"])):u("",!0)]),parameters:t(()=>[e(l)?(n(),s(e(ae),{key:0,"text-to-copy":e(x)},{default:t(()=>[m(S,{lang:"json",text:e(x),class:"flow-run__parameters"},null,8,["text"])]),_:1},8,["text-to-copy"])):u("",!0)]),_:1},8,["selected","tabs"])]),_:1})}}});export{pe as default};
